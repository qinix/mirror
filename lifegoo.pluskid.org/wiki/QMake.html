<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>QMake</title>
    <meta name="generator" content="muse.el">
    <meta http-equiv="Content-Type"
          content="text/html; charset=utf-8">
    <LINK REL=StyleSheet HREF="css/style.css" TYPE="text/css">

    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      _uacct = "UA-2502495-1";
      urchinTracker();
    </script>

  </head>
  <body>
    <a id="top"></a>
    <h1>QMake</h1>
<div id="wrap">
<div id="navmenu">
  <h2>Favourite</h2>
  <ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="Emacs.html">Emacs</a></li>
    <li><a href="CommonLisp.html">Common Lisp</a></li>
  </ul>

  <h2>Unix</h2>
  <ul>
    <li><a href="Linux.html">Linux</a></li>
    <li><a href="Debian.html">Debian</a></li>
  </ul>

  <h2>Software</h2>
  <ul>
    <li><a href="Emacs.html">Emacs</a></li>
    <li><a href="Sawfish.html">Sawfish</a></li>
    <li><a href="Screen.html">Screen</a></li>
  </ul>

  <h2>Programming</h2>
  <ul>
    <li><a href="CAndCPlusPlus.html">C/C++</a></li>
    <li><a href="CommonLisp.html">Common Lisp</a></li>
    <li><a href="Scheme.html">Scheme</a></li>
    <li><a href="Python.html">Python</a></li>
  </ul>

</div>

<div id="content">
<!-- end header -->

<!--contents goes here--><div class="contents"><h2>Contents</h2>
<dl>
<dt>
<a href="#sec1">简介</a>
</dt>
<dt>
<a href="#sec2">在非 Qt 程序中使用 qmake</a>
</dt>
</dl>
</div>


    <!-- Page published by Emacs Muse begins here -->
<h2><a name="sec1" id="sec1"></a>
简介</h2>

<p class="first">QMake 是 Qt 工具包中带的一个非常方便的工具。可以用于生成 Makefile 以及
各种工程文件，还可以生成 Microsoft Visual Studio 可以使用的项目文件等。
最关键的是它可以自动解决依赖关系，不用手工写 Makefile 了。而且它是跨平
台的。</p>

<p>为我们的工程创建一个 <code>project.pro</code> 的 qmake 工程文件，例如：</p>

<pre class="example">
SOURCES = main.cpp Dialog.cpp Emitter.cpp
HEADERS = Dialog.hpp Emitter.hpp

CONFIG += qt
LIBS += -lboost_thread
</pre>

<p>工程文件非常简单，指定源文件、头文件。 <code>CONFIG</code> 可以指定一些编译选项，其
中一些选项如 <code>qt</code> 以及 <code>thread</code> 是 qmake 内部能够识别的。如果要使用 Qt 的网
络以及线程库，可以指定</p>

<pre class="example">
QT += network
</pre>

<p>另外，我这里为了尝试一下 Qt 的信号槽机制在别的线程库下是否能正常使用，
决定使用 boost 的线程库。于是我使用 <code>LIBS</code> 参数指定额外需要链接的库。更详
细的选项可以参加 qmake 的文档。</p>

<p>之后我们可以通过 qmake 工程文件生成其他文件 ( 如 Makefile )</p>

<pre class="example">
qmake -o Makefile project.pro
</pre>

<p>接下来就可以输入 <code>make</code> 命令使用生成的 <code>Makefile</code> 来进行构建了。非常方便。</p>


<h2><a name="sec2" id="sec2"></a>
在非 Qt 程序中使用 qmake</h2>

<p class="first">事实上， qmake 非常好用，我们甚至想在非 Qt 程序中使用它。这也很容易。
只要加入</p>

<pre class="example">
CONFIG -= qt
</pre>

<p>那么 qmake 就不会添加任何和 Qt 库相关的头文件以及 lib 之类的进来了。</p>


<!-- Page published by Emacs Muse ends here -->
  </div>
  </div>
  </body>
</html>
